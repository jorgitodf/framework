{% extends "templates/layout.twig" %}

{% block title %}Login{% endblock %}

{% block content %}
    <div class="container" id="div-principal-login">
        <div class="row">
            <div class="col-md-8 col-md-offset-2">
                <div class="panel panel-default">
                    <div class="panel-heading">Login</div>
                    <div class="panel-body">
                        <form class="form-horizontal" role="form" onsubmit="logar()" id="form-login" method="POST" action="/auth/token">
                            <div class="form-group">
                                <label for="email" class="col-md-3 control-label">E-Mail</label>
                                <div class="col-md-6">
                                    <input id="email" type="email" class="form-control" name="email" value="" placeholder="Informe seu E-mail" autofocus>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="password" class="col-md-3 control-label">Password</label>
                                <div class="col-md-6">
                                    <input id="password" type="password" class="form-control" name="password" placeholder="Informe sua Senha" >
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-md-8 col-md-offset-3">
                                    <button type="submit" class="btn btn-primary">Logar</button>

                                    <a class="btn btn-link" href="">Esqueceu sua Senha?</a>
                                </div>
                            </div>
                        </form>
                    </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        #div-principal-login {
            margin-top: 9%;
        }

    </style>

    <script>
        function logar() {
            let email = document.getElementById('email').value;
            let password = document.getElementById('password').value;
            let url = $("#form-login").attr("action");    
            let data = {
                email: email,
                password: password
            }

            //axios.defaults.headers.common['Authorization'] = AUTH_TOKEN;
            axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded';
            axios.post(url, JSON.stringify(data))
                .then(function(response) {
                    console.log(response.data);
                })
                .catch(function(error) {
                    console.log(error.data);
                })

            event.preventDefault();
        }
    </script>

{% endblock %}


